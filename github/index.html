<!DOCTYPE html>
<html lang="en">
    <head>
    
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="robots" content="noindex,nofollow">

        <title>Github - PCOT Documentation</title>
    
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
    <link rel="stylesheet" href="../css/lightbox.min.css">
    <link rel="stylesheet" href="../css/site.css">

    

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    <script src="../js/lightbox-plus-jquery.min.js"></script>
 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">PCOT Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../gettingstarted/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../gettingstarted/installrun/" class="dropdown-item">Installing and running</a>
</li>
                                    
<li>
    <a href="../gettingstarted/concepts/" class="dropdown-item">PCOT concepts</a>
</li>
                                    
<li>
    <a href="../gettingstarted/tutorial/" class="dropdown-item">Tutorial</a>
</li>
                                    
<li>
    <a href="../gettingstarted/inputs/" class="dropdown-item">Loading other image formats</a>
</li>
                                    
<li>
    <a href="../gettingstarted/help/" class="dropdown-item">Getting help</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../userguide/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../userguide/principles/" class="dropdown-item">Operating principles</a>
</li>
                                    
<li>
    <a href="../userguide/canvas/" class="dropdown-item">The Canvas</a>
</li>
                                    
<li>
    <a href="../autodocs/" class="dropdown-item">Autodocs</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Developer's Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../devguide/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../devguide/library/" class="dropdown-item">Using PCOT as a library</a>
</li>
                                    
<li>
    <a href="../devguide/plugins/" class="dropdown-item">Writing PCOT plugins</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../roadmap/" class="nav-link">Roadmap</a>
                            </li>
                            <li class="navitem">
                                <a href="../gettingstarted/issues/" class="nav-link">Known issues</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#pcot" class="nav-link">PCOT</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#installation" class="nav-link">Installation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#running-pcot" class="nav-link">Running PCOT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#running-pcot-inside-pycharm" class="nav-link">Running PCOT inside Pycharm</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#environment-variables" class="nav-link">Environment variables</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#common-runtime-issues" class="nav-link">Common runtime issues</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<div class="alert alert-primary" role="alert">
<p>This page contains the contents of the README.md file in our repository,
and describes how to install PCOT if you have access to the source code.</p>
</div>
<h1 id="pcot">PCOT</h1>
<p>This is an early version of the Pancam Operations Toolkit. This is
a Python application and library primarily intended for 
processing data from the Pancam
instrument on the Rosalind Franklin rover, although it lends itself
to any task involving processing multispectral image data.</p>
<p>For example, with PCOT you can:
* load ENVI (BSQ interleaved 4-byte float) and (to a basic level) PDS4 multispectral images
* load multiple images in other formats (e.g. PNG) and combine them into
multispectral images
* define regions of interest in the data
* perform mathematical operations
* view spectra and histograms</p>
<p>and many other things besides. PCOT is highly extensible and open-source,
so any missing functionality is easily added.</p>
<p>PCOT operates on a graph model - the data is processed through a set of nodes
which manipulate it in various ways (e.g. add regions of interest, perform
maths, splice images together, merge image channels, plot spectra). A PCOT
document describes this graph, and we
intend that documents are distributed along with the data they generate
to help reproducibility.</p>
<p>More documentation can be found <a href="https://au-exomars.github.io/PCOT/">here</a></p>
<h2 id="installation">Installation</h2>
<p>PCOT is a Python program (and library) with a number of dependencies,
notably numpy and PySide2 (the official Python interface to Qt).
We find the best way to manage these is to use
<a href="https://anaconda.com/">Anaconda</a>
and
<a href="https://python-poetry.org/">Poetry</a>.
Installation has been tested on Windows 10,
MacOS and Ubuntu 20.04.</p>
<h3 id="install-anaconda">Install Anaconda</h3>
<p>The first thing you will need to do is install Anaconda, which can be done from here:</p>
<ul>
<li>Windows: <a href="https://docs.anaconda.com/anaconda/install/windows/">https://docs.anaconda.com/anaconda/install/windows/</a></li>
<li>Linux: <a href="https://docs.anaconda.com/anaconda/install/linux/">https://docs.anaconda.com/anaconda/install/linux/</a></li>
<li>MacOS: <a href="https://docs.anaconda.com/anaconda/install/mac-os/">https://docs.anaconda.com/anaconda/install/mac-os/</a> (untested)</li>
</ul>
<h3 id="obtain-the-software">Obtain the software</h3>
<p>This can be done by
either downloading the archive from Github and extracting it into a new
directory,
or cloning the repository. In both cases, the top level directory should be
called
PCOT (this isn't really mandatory but makes the instructions below simpler).
The best way to download is this:</p>
<ul>
<li>Open an Anaconda shell window (see below)  </li>
<li>If you have an SSH key set up for GitHub, type this command into the shell
(<strong>changing the repository address if it is different</strong>):</li>
</ul>
<pre><code class="language-shell">git clone git@github.com:AU-ExoMars/PCOT.git
</code></pre>
<ul>
<li>Otherwise type this:</li>
</ul>
<pre><code class="language-shell">git clone https://github.com/AU-ExoMars/PCOT.git
</code></pre>
<ul>
<li>You should now have a PCOT directory which will contain this file (as README.md)
and quite a few others.</li>
</ul>
<h4 id="opening-anacondas-shell-on-different-oss">Opening Anaconda's shell on different OSs</h4>
<ul>
<li><strong>Windows:</strong> Open the <strong>Anaconda Powershell Prompt</strong> application, which will have been installed when you
installed Anaconda. This can be found in the Start menu under Anaconda3,
or in the applications list in Anaconda Navigator (which is also in the Start
menu in the same place).</li>
<li><strong>Linux and MacOS</strong>: just open a Bash shell  </li>
</ul>
<h3 id="installing-on-ubuntu-macos">Installing on Ubuntu / MacOS</h3>
<p>Assuming you have successfully installed Anaconda and cloned or downloaded
PCOT as above:</p>
<ul>
<li>Open a bash shell</li>
<li><strong>cd</strong> to the PCOT directory (which contains this file).</li>
<li>Run the command <strong>conda create -n pcot python=3.8 poetry</strong>.
This will create an environment called <strong>pcot</strong> which uses Python 3.8 and
the Poetry dependency and packaging manager. It may take some time.</li>
<li>Activate the environment with <strong>conda activate pcot</strong>.</li>
<li>Now run <strong>poetry install</strong>. This will set up all the packages PCOT is
dependent on and install PCOT.</li>
<li>You should now be able to run <strong>pcot</strong> to start the application.</li>
</ul>
<h3 id="installing-on-windows">Installing on Windows</h3>
<p>Assuming you have successfully installed Anaconda and cloned or downloaded PCOT as above:</p>
<ul>
<li>Open the Anaconda PowerShell Prompt application from the Start Menu.</li>
<li><strong>cd</strong> to the PCOT directory (which contains this file).</li>
<li>Run the command <strong>conda create -n pcot python=3.8 poetry</strong>.
This will create an environment called <strong>pcot</strong> which uses Python 3.8 and the Poetry dependency
and packaging manager. It may take some time.</li>
<li>Activate the environment with <strong>conda activate pcot</strong>.</li>
<li>Now run <strong>poetry install</strong>. This will set up all the packages PCOT is dependent on and install
PCOT.</li>
<li>You should now be able to run <strong>pcot</strong> to start the application.</li>
</ul>
<h2 id="running-pcot">Running PCOT</h2>
<p>Open an Anaconda shell and run the following commands (assuming you installed PCOT into your home directory):</p>
<pre><code class="language-shell">cd PCOT
conda activate pcot
pcot
</code></pre>
<h3 id="create-an-executable-icon-macos">Create an 'executable' icon (MacOS)</h3>
<p>Note: these instructions were created and tested under MacOS but should be usable on other systems
with some adaptation.</p>
<p>The above commands can be put into a bash script which will allow PCOT to be run by clicking on an icon.</p>
<p>Open a text editor (e.g. TextEdit, Notepad++, Sublime, etc) and create a new file called <strong>pcot.sh</strong>, and save it
 to your desktop (or wherever you want the icon). Add the following to this file:</p>
<pre><code class="language-shell">#!/usr/bin/env bash
eval &quot;$(conda shell.bash hook)&quot;
conda activate pcot
pcot
</code></pre>
<p>Open a terminal window and navigate to the location of your new script, then run the following command to give it
permission to run:</p>
<pre><code class="language-shell">chmod +x pcot
</code></pre>
<p>You can now use the icon to run PCOT.</p>
<p>Note: you may need to set up your system to open <code>.sh</code> files with Terminal by default.</p>
<h2 id="running-pcot-inside-pycharm">Running PCOT inside Pycharm</h2>
<p>These instructions apply to Anaconda installations.</p>
<ul>
<li>First set up the Conda environment and interpreter:<ul>
<li>Open PyCharm and open the PCOT directory as an existing project.</li>
<li>Open <strong>File/Settings..</strong> (Ctrl+Alt+S)</li>
<li>Select <strong>Project:PCOT / Python Interpreter</strong></li>
<li>If the Python Interpreter is not already Python 3.8 with something like <strong>anaconda3/envs/pcot/bin/python</strong><ul>
<li>Select the cogwheel to the right of the Python Interpreter dropdown and then select  <strong>Add</strong>.</li>
<li>Select <strong>Conda Environment</strong>.</li>
<li>Select <strong>Existing Environment</strong>.</li>
<li>Select the environment: it should be something like <strong>anaconda3/envs/pcot/bin/python</strong>.</li>
<li>Select <strong>OK</strong>.</li>
</ul>
</li>
</ul>
</li>
<li>Now set up the run configuration:<ul>
<li>Select <strong>Edit Configurations...</strong> (or it might be <strong>Add Configuration...</strong>) from the configurations drop down in the menu bar</li>
<li>Add a new configuration (the + symbol) and select <strong>Python</strong></li>
<li>Set <strong>Script Path</strong> to <strong>PCOT/src/pcot/__main__.py</strong></li>
<li>Make sure the interpreter is something like <strong>Project Default (Python 3.8 (pcot))</strong>, i.e. the Python interpreter of the pcot environment.</li>
</ul>
</li>
<li>You should now be able to run and debug PCOT.</li>
</ul>
<h2 id="environment-variables">Environment variables</h2>
<p>It's a good idea, but not mandatory, to set the environment variable
<strong>PCOTUSER</strong> to a string of the form <code>name &lt;email&gt;</code>. For example,
in Linux I have added the following to my <strong>.bashrc</strong> file:</p>
<pre><code>export PCOT_USER=&quot;Jim Finnis &lt;jcf12@aber.ac.uk&gt;&quot;
</code></pre>
<p>This data is added to all saved PCOT graphs. If the environment variable
is not set, the username returned by Python's getpass module is used
(e.g. 'jcf12').</p>
<h2 id="common-runtime-issues">Common runtime issues</h2>
<h3 id="cant-start-qt-on-linux">Can't start Qt on Linux</h3>
<p>This sometimes happens:</p>
<pre><code class="language-txt">qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, webgl, xcb.

</code></pre>
<p>Try this:</p>
<pre><code class="language-bash">export QT_DEBUG_PLUGINS=1
pcot
</code></pre>
<p>to run the program again, and look at the output.
You might see errors like this (I've removed some stuff):</p>
<pre><code class="language-txt">QFactoryLoader::QFactoryLoader() checking directory path &quot;[...]envs/pcot/bin/platforms&quot; ...
Cannot load library [...]/plugins/platforms/libqxcb.so: (libxcb-xinerama.so.0: cannot open shared object file: No such file or directory)
QLibraryPrivate::loadPlugin failed on &quot;...[stuff removed].. (libxcb-xinerama.so.0: cannot open shared object file: No such file or directory)&quot;
</code></pre>
<p>If that's the case, install the missing package:</p>
<pre><code>sudo apt install libxcb-xinerama0
</code></pre>
<p>That should help. Otherwise, send a message to us with the output from the <code>QT_DEBUG_PLUGINS</code> run and we will investigate.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
